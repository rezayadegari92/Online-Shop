<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"><title>Top Rated</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container mt-4">
  <h2>Top Rated Products</h2>
  <div id="top-list"></div>
  <nav><ul class="pagination" id="top-pg"></ul></nav>
</div>
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script>
  const token = localStorage.getItem('access_token');
  const url0 = '/api/products/top-rated/';

  function load(url=url0) {
    $.ajax({
      url, headers:{'Authorization':'Bearer '+token},
      success: data=>{
        $('#top-list').empty();
        data.results.forEach(p=>{
          $('#top-list').append(`
            <div>
              <a href="product_detail.html?id=${p.id}">${p.name}</a>
              â€” Rating: ${p.avg_rating}
            </div>
          `);
        });
        // pagination same as products...
      }
    });
  }

  $(load);
</script>
</body>
</html>
